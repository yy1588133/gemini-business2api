import{d as A,h as v,i as d,o as B,j as z,c as n,a as s,b,t as g,n as y,F as L,r as S,e as o}from"./index-Duw_mHSu.js";const j={class:"truncate"},E=["onClick"],M={key:0,class:"text-xs"},F=A({__name:"SelectMenu",props:{modelValue:{},options:{},multiple:{type:Boolean},placeholder:{},placement:{}},emits:["update:modelValue"],setup(h,{emit:x}){const t=h,m=x,a=v(!1),c=v(null),i=d(()=>t.options.map(e=>typeof e=="string"?{label:e,value:e}:e)),V=d(()=>{if(t.multiple){const l=Array.isArray(t.modelValue)?t.modelValue:[];return l.length?l.length===1?i.value.find(u=>u.value===l[0])?.label||l[0]:`已选 ${l.length} 项`:t.placeholder||"请选择"}return i.value.find(l=>l.value===t.modelValue)?.label||String(t.modelValue??"")}),k=d(()=>t.placement==="up"?"bottom-full mb-2":"mt-2"),_=()=>{a.value=!a.value},p=e=>t.multiple?Array.isArray(t.modelValue)&&t.modelValue.includes(e):t.modelValue===e,w=e=>{if(t.multiple){const l=Array.isArray(t.modelValue)?t.modelValue:[],u=l.includes(e)?l.filter(C=>C!==e):[...l,e];m("update:modelValue",u);return}m("update:modelValue",e),a.value=!1},f=e=>{c.value&&(c.value.contains(e.target)||(a.value=!1))};return B(()=>{document.addEventListener("click",f)}),z(()=>{document.removeEventListener("click",f)}),(e,l)=>(o(),n("div",{ref_key:"root",ref:c,class:"relative w-full sm:w-44"},[s("button",{type:"button",class:"flex w-full items-center justify-between gap-2 rounded-full border border-input bg-background px-4 py-2 text-sm text-foreground transition-colors hover:border-primary",onClick:_},[s("span",j,g(V.value),1),l[0]||(l[0]=s("svg",{"aria-hidden":"true",viewBox:"0 0 20 20",class:"h-4 w-4",fill:"currentColor"},[s("path",{d:"M5 7l5 6 5-6H5z"})],-1))]),a.value?(o(),n("div",{key:0,class:y(["absolute right-0 z-30 w-full space-y-1 rounded-2xl border border-border bg-card p-2 shadow-lg",k.value])},[(o(!0),n(L,null,S(i.value,r=>(o(),n("button",{key:r.value,type:"button",class:y(["flex w-full items-center justify-between rounded-xl px-3 py-2.5 text-left text-sm transition-colors hover:bg-accent",p(r.value)?"bg-accent text-accent-foreground":"text-muted-foreground"]),onClick:u=>w(r.value)},[s("span",null,g(r.label),1),p(r.value)?(o(),n("span",M,"OK")):b("",!0)],10,E))),128))],2)):b("",!0)],512))}});export{F as _};
